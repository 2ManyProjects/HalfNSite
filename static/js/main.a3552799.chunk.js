(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{192:function(e,t,a){},199:function(e,t){e.exports="data:image/png;base64,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"},200:function(e,t,a){e.exports=a.p+"static/media/bestbuy.f63eab94.png"},280:function(e,t,a){e.exports=a(517)},285:function(e,t,a){},286:function(e,t,a){},288:function(e,t,a){},289:function(e,t,a){},290:function(e,t,a){},49:function(e,t){e.exports="data:image/png;base64,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"},504:function(e,t,a){},510:function(e,t,a){},517:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(23),s=a.n(o),i=(a(285),a(118)),l=a(43),c=a(15),u=a(13),d=a(18),m=a(16),h=a(17),p=a(7),g=(a(286),a(198)),f=a.n(g),E=a(518),b=a(225),A=a(74),v=(a(288),function(e){function t(){return Object(c.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"store-card col-sm-6 "},r.a.createElement("a",{href:this.props.link,rel:"noopener noreferrer",target:"_blank"},r.a.createElement("div",{className:"image",style:{backgroundImage:"url(".concat(this.props.logo,")"),backgroundColor:this.props.colour}},r.a.createElement("div",{className:"greenBox"}),r.a.createElement("div",{className:"discount",style:{color:this.props.contrastColor}},this.props.largestDiscount,"%"))))}}]),t}(n.Component)),y=a(49),C=a.n(y),D=a(199),S=a.n(D),k=a(200),O=a.n(k),j=(a(289),n.Component,function(e){return r.a.createElement("div",{className:"backArrow arrow",onClick:e.goToPrevSlide},r.a.createElement("i",{className:"fa fa-arrow-left fa-2x","aria-hidden":"true"}))}),w=function(e){return r.a.createElement("div",{className:"nextArrow arrow",onClick:e.goToNextSlide},r.a.createElement("i",{className:"fa fa-arrow-right fa-2x","aria-hidden":"true"}))},x=(a(290),["9EB16649-E4D8-8EAC-FFF8-6B8CE47C7600","6F445602-1F64-DBE7-FF5D-C44AB0511700","AIzaSyApfIryWW-NDUkgpTpKwEsy5OsR1GsaGQo","pk_test_H6dvvjYO6AowAGxIAImd7EWJ"]),I=a(20),F=a.n(I),B="https://api.backendless.com/C499EC1A-F6D2-77C2-FFCF-14A634B64900/"+x[0]+"/",N=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={vote:0,tagline:"A Friend in Every Store",hide:!1,data:{}},a.getHidden=function(){return a.state.hide},a.sendVote=function(e){F.a.get(B+"data/Website/6DF35F3E-B8F2-A39C-FF03-4B3BED42A000").then(function(t){a.setState({data:t.data});var n=a.state.data;0===e?n.FES+=1:n.FEB+=1,a.setState({data:n}),F.a.put(B+"data/Website/6DF35F3E-B8F2-A39C-FF03-4B3BED42A000",n).then(function(e){console.log(e)}).catch(function(e){console.log(e)}),console.log(a.state.data)})},a.handleVote=function(e){a.setState({vote:e}),a.setState({hide:!0}),0===e?a.setState({tagline:"A Friend in Every Store"}):a.setState({tagline:"Friends with Employee Benefits"}),a.sendVote(e)},a.renderTagline=function(){return-1===a.state.vote?void 0:r.a.createElement("h1",null,a.state.tagline)},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("center",null,r.a.createElement("br",null),r.a.createElement("span",{className:"subtitle"},this.renderTagline())))}}]),t}(n.Component),R=a(93),M=(a(312),a(14)),U=a(5),P=a.n(U),L=a(29),W=a.n(L),T=a(31),H=a.n(T),z=a(35),Y=a.n(z),J=a(34),V=a.n(J),q=a(10),Q=a.n(q),K=a(32),G=a.n(K),Z=function(e){var t=e.formErrors;return r.a.createElement("div",{className:"formErrors"},Object.keys(t).map(function(e,a){if(t[e].length>0){var n=e;return"amount"!==n&&"rate"!==n&&"resetDate"!==n&&"totaltAmnt"!==n||(n=""),r.a.createElement("p",{key:a},n," ",t[e])}return""}))},X=a(64),_=a.n(X),$=a(33),ee=a.n($),te=a(71),ae=a.n(te),ne=a(116),re=a.n(ne),oe=a(8),se=a.n(oe),ie=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleCloseMail=function(){a.setState({open:!1,storeName:"",profile:{},userData:{},content:"",anchorEl:null,selectedDeal:{},email:{amnt:1,link:"",txt:""},disabled:!0,Errors:{txt:""}}),a.props.close()},a.fillData=function(){F.a.get(a.state.profile.profile).then(function(e){for(var t={},n=0;n<e.data.length;n++)if(e.data[n].name.includes(a.state.storeName)){t=e.data[n];break}a.setState({userData:t},function(){a.renderMenu()})})},a.handleClick=function(e){a.setState({anchorEl:e.currentTarget})},a.handleClose=function(e){a.setState({selectedDeal:e,anchorEl:null})},a.renderMenu=function(){var e=a.state.userData.storeDeals.map(function(e,t){return 0===e.currentAmnt?r.a.createElement("div",{hidden:!0}):r.a.createElement(ee.a,{onClick:function(){a.handleClose(e)},key:t}," ",e.rate,"%")});a.setState({content:e})},a.getDealSelection=function(){return void 0===a.state.selectedDeal.rate?"Select Deal":a.state.selectedDeal.rate+"% "+a.state.selectedDeal.id},a.generateGuid=function(){var e,t;for(e="",t=0;t<32;t++)8!==t&&12!==t&&16!==t&&20!==t||(e+="-"),e+=Math.floor(16*Math.random()).toString(16).toUpperCase();return e},a.valChange=function(e){var t=e.target.value;"link"===e.target.id?a.setState({email:{link:t,txt:a.state.email.txt,amnt:a.state.email.amnt}}):a.setState({email:{txt:t,amnt:a.state.email.amnt,link:a.state.email.link}},function(){a.validateField()})},a.handleChange=function(e,t){a.setState({email:{amnt:t,link:a.state.email.link,txt:a.state.email.txt}})},a.validateErrors=function(){var e=void 0===a.state.selectedDeal.rate||a.state.email.txt.length<5;a.setState({disabled:e})},a.handleSendMail=function(){var e=a.generateGuid(),t=Object(p.a)(Object(p.a)(a));a.state.selectedDeal.selectedAmnt=a.state.email.amnt;var n={id:e,from:a.props.getUser.name,to:a.state.userData.seller,storeName:a.state.storeName,selectedDeal:a.state.selectedDeal,subject:a.state.email.amnt+" of "+a.state.email.link,content:a.state.email.txt,money:!1,value:0,imageLinks:[],seen:!1,completed:!1,reply:[]};F.a.get(a.props.getMessage.buyingEmails).then(function(a){var r=a.data;r.push(n);var o="profileData/"+t.props.getUser.objectId+"/",s=new Blob([JSON.stringify(r)],{type:"application/json"});se.a.Files.saveFile(o,"buyingemails.txt",s,!0).then(function(t){F.a.post("https://api.backendless.com/C499EC1A-F6D2-77C2-FFCF-14A634B64900/9EB16649-E4D8-8EAC-FFF8-6B8CE47C7600/services/MyService/sendAdminMail",{record:"buyingemails.txt",id:e,email:n,reply:!1},{headers:{"Content-Type":"application/json"}}).then(function(e){console.log("Message Init",e)}).catch(function(e){console.log("Message Error",e)})}).catch(function(e){})}).catch(function(e){console.log("Error",e)}),a.setState({open:!1,storeName:"",profile:{},userData:{},content:"",anchorEl:null,selectedDeal:{},email:{amnt:1,link:"",txt:""},disabled:!0,Errors:{txt:""}},function(){a.props.close()})},a.state={open:a.props.show,storeName:"",profile:{},userData:{},content:"",anchorEl:null,selectedDeal:{},email:{amnt:1,link:"",txt:""},disabled:!0,Errors:{txt:""}},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;void 0!==e.profile.name&&this.setState({open:e.show,profile:e.profile,storeName:e.storeName},function(){t.fillData()})}},{key:"validateField",value:function(){var e=this,t=this.state.Errors;this.state.email.txt.length<5?t.txt=" Please Specify your order details":t.txt="",this.setState({Errors:t},function(){e.validateErrors()})}},{key:"render",value:function(){var e=this.props.classes,t=this.state.anchorEl,a=Boolean(t);return r.a.createElement("div",null,r.a.createElement(W.a,{open:this.state.open,onClose:this.handleCloseMail,"aria-labelledby":"form-dialog-title",maxWidth:"md",fullWidth:!0},r.a.createElement(V.a,{id:"form-dialog-title"},"Send an Inquiry"),r.a.createElement(Y.a,null,r.a.createElement(Q.a,{align:"center",variant:"h4",gutterBottom:!0},this.state.storeName),r.a.createElement("center",null,r.a.createElement(P.a,{variant:"contained","aria-owns":a?"fade-menu":void 0,"aria-haspopup":"true",onClick:this.handleClick},this.getDealSelection()),r.a.createElement(_.a,{id:"fade-menu",anchorEl:t,open:a,onClose:this.handleClose,TransitionComponent:ae.a},this.state.content)),r.a.createElement("div",{hidden:void 0===this.state.selectedDeal.rate},r.a.createElement("div",{className:"panel panel-default warning"},r.a.createElement(Z,{formErrors:this.state.Errors})),r.a.createElement(re.a,{classes:{container:e.slider},value:this.state.email.amnt,required:!0,min:1,max:parseInt(this.state.selectedDeal.currentAmnt),step:1,id:"Amnt",onChange:this.handleChange}),r.a.createElement(Q.a,{id:"label"},this.state.email.amnt,"/",this.state.selectedDeal.currentAmnt),r.a.createElement(G.a,{margin:"dense",id:"link",label:"Product Link (Not Required)",type:"url",onChange:this.valChange,multiline:!0,required:!1,fullWidth:!0}),r.a.createElement(G.a,{margin:"dense",id:"text",label:"Details",type:"text",onChange:this.valChange,required:!0,multiline:!0,inputProps:{maxLength:400},fullWidth:!0}),r.a.createElement(Q.a,{id:"label"},this.state.email.txt.length,"/400"))),r.a.createElement(H.a,null,r.a.createElement(P.a,{onClick:this.handleCloseMail,color:"primary"},"Cancel"),r.a.createElement(P.a,{disabled:this.state.disabled,onClick:this.handleSendMail,color:"primary"},"Send"))))}}]),t}(n.Component),le=Object(M.withStyles)({root:{width:300},slider:{padding:"22px 0px"}})(ie),ce=a(202),ue=a.n(ce),de="https://api.backendless.com/C499EC1A-F6D2-77C2-FFCF-14A634B64900/"+x[0]+"/",me=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={query:"",storeName:"",target:null,results:[],showTable:!1,userIDs:[],userData:[],tableData:[],spacing:"",single:"",popper:"",show:!1,anchorEl:null,profile:{}},a.handleInputChange=function(e){var t=e.target.value;a.setState({query:t},function(){return a.state.query&&a.state.query.length>1&&a.getInfo(!1),!1})},a.handlePress=function(e){return 13===e.charCode&&(e.preventDefault(),a.getInfo(!0)),!1},a.getInfo=function(e){if(e)a.fillID();else{var t=Object(p.a)(Object(p.a)(a)),n="name LIKE '"+a.state.query+"%'",r=se.a.DataQueryBuilder.create().setWhereClause(n);se.a.Data.of("Stores").find(r).then(function(e){var a="";void 0!==e[0]&&(a=e[0].Name);var n=e.filter(function(e){return t.getDistance(e.Lat,e.Long)<100?e:null});t.setState({results:n,storeName:a},function(){var e=[];t.state.results.map(function(t){return e.push(t.Name)});var a="";a+=Array.from(new Set(e)).filter(function(e,t,a){return a.indexOf(e)===t}).map(function(e,t){return"\n"}),console.log(a),t.setState({spacing:a})})}).catch(function(e){})}},a.getDistance=function(e,t){var n=a.deg2rad(e-a.props.getCoords.lat),r=a.deg2rad(t-a.props.getCoords.lng),o=Math.sin(n/2)*Math.sin(n/2)+Math.cos(a.deg2rad(a.props.getCoords.lat))*Math.cos(a.deg2rad(e))*Math.sin(r/2)*Math.sin(r/2);return 6371*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)))},a.deg2rad=function(e){return e*(Math.PI/180)},a.getDealType=function(e){return!1===e?"Normal":"Factory +  Discount"},a.fillID=function(){for(var e=[],t=0;t<a.state.results.length;t++)if(void 0!==a.state.results[0]&&null!==a.state.results[0].UserList){var n=JSON.parse(a.state.results[0].UserList);a.props.getLogged&&(n=n.filter(function(e){return e!==a.props.getUser.objectId})),e=e.concat(n)}a.setState({userIDs:e},function(){a.fillUserData()})},a.fillUserData=function(){void 0!==a.state.results[0]&&function(){for(var e=[],t=function(t){F.a.get(de+"data/Users/"+a.state.userIDs[t]).then(function(n){F.a.get(n.data.profile).then(function(r){for(var o=n.data,s=0;s<r.data.length;s++)if(r.data[s].name.includes(a.state.results[0].Name)){o.storeData=r.data[s];break}e.push(o),a.setState({userData:e}),t===a.state.userIDs.length-1&&a.generateTableData()})})},n=0;n<a.state.userIDs.length;n++)t(n)}()},a.generateTableData=function(){for(var e=[],t=0;t<a.state.userData.length;t++){for(var n=[],r=0;r<a.state.userData[t].storeData.storeDeals.length;r++){var o={id:a.state.userData[t].storeData.storeDeals[r].id,atcost:a.state.userData[t].storeData.storeDeals[r].atCost,currentAmnt:a.state.userData[t].storeData.storeDeals[r].currentAmnt,rate:a.state.userData[t].storeData.storeDeals[r].rate,totalAmnt:a.state.userData[t].storeData.storeDeals[r].totalAmnt,text:a.state.userData[t].storeData.storeDeals[r].text,selected:!1,selectedAmnt:0};n.push(o)}var s={name:a.state.userData[t].name,transactions:a.state.userData[t].sellnum,rating:a.state.userData[t].rating,messageID:a.state.userData[t].messageID,objectID:a.state.userData[t].objectId,sellnum:a.state.userData[t].sellnum,buynum:a.state.userData[t].buynum,email:a.state.userData[t].email,profile:a.state.userData[t].profile,deals:n};e.push(s)}a.setState({tableData:e})},a.generateDealData=function(e){for(var t=[],n=0;n<e.length;n++){var o={atcost:e[n].atcost,currentAmnt:e[n].currentAmnt,rate:e[n].rate,totalAmnt:e[n].totalAmnt,text:e[n].text};t.push(o)}var s=[{Header:"Type",id:"atcost",accessor:function(e){return a.getDealType(e.atcost)}},{Header:"Discount Rate",id:"rate",accessor:function(e){return e.rate},Cell:function(e){return r.a.createElement("span",{className:"number"},e.value,"%")}},{Header:"Restrictions",id:"text",accessor:function(e){return e.text}},{Header:"TotalAmount",id:"totalAmnt",accessor:function(e){return e.totalAmnt}},{Header:"Current Amount",id:"currentAmnt",accessor:function(e){return e.currentAmnt}}],i=3;return e.length<3&&(i=e.length),r.a.createElement("div",null,r.a.createElement(R.a,{data:t,columns:s,defaultPageSize:i,showPageSizeOptions:!1,showPageJump:!1,showPagination:!1,className:"-striped -highlight",resizable:!1}))},a.sendTestEmail=function(e,t){e.preventDefault(),a.setState({show:!0,profile:t})},a.handleMenuClose=function(e){a.setState({query:e,anchorEl:null})},a.selectedOption=function(e){a.setState({query:e},function(){a.getInfo(!0)})},a.setTarget=function(e){null==a.state.target&&a.setState({target:e.currentTarget})},a.getStores=function(){var e=[];return a.state.results.map(function(t){return e.push(t.Name)}),Array.from(new Set(e)).filter(function(e,t,a){return a.indexOf(e)===t})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=[{Header:"Select",id:"button",accessor:function(e){return e},maxWidth:130,Cell:function(t){return r.a.createElement(P.a,{disabled:!e.props.getLogged,onClick:function(a){return e.sendTestEmail(a,t.original)},color:"primary",variant:"outlined"},"Send Email")}},{Header:"Name",accessor:"name",maxWidth:100},{Header:"Transactions",accessor:"transactions",maxWidth:100},{Header:"Rating",accessor:"rating",maxWidth:100},{Header:"# of Discounts",id:"numDiscounts",accessor:function(e){return e.deals.length},maxWidth:120},{Header:"Deals",id:"Deals",accessor:function(t){return e.generateDealData(t.deals)}}];return r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement(ue.a,{items:this.getStores(),shouldItemRender:function(e,t){return e.toLowerCase().indexOf(t.toLowerCase())>-1},getItemValue:function(e){return e},renderItem:function(e,t){return r.a.createElement("div",{key:e,style:{backgroundColor:t?"#eee":"#FFF"}},e)},value:this.state.query,onChange:this.handleInputChange,onSelect:this.selectedOption}),this.state.spacing,r.a.createElement(le,{show:this.state.show,storeName:this.state.storeName,profile:this.state.profile,getUser:this.props.getUser,getMessage:this.props.getMessage,emailLink:de+"messaging/email",close:function(){e.setState({show:!1,deal:{}})}}),r.a.createElement("center",null,r.a.createElement(R.a,{data:this.state.tableData,columns:t,defaultPageSize:20,className:"-striped -highlight",resizable:!1,noDataText:!1}))))}}]),t}(n.Component),he=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(N,{getLogged:this.props.getLogged}),r.a.createElement("center",null,r.a.createElement(me,{getCoords:this.props.getCoords,getUser:this.props.getUser,getMessage:this.props.getMessage,getLogged:this.props.getLogged})))}}]),t}(n.Component),pe=a(30),ge=a(109),fe=a.n(ge),Ee=a(110),be=a.n(Ee),Ae=a(22),ve=a.n(Ae),ye=a(61),Ce=a.n(ye),De=a(90),Se=a.n(De),ke=a(41),Oe=a(205),je=a.n(Oe),we=a(146),xe=a.n(we),Ie=a(144),Fe=a.n(Ie),Be=a(145),Ne=a.n(Be),Re=a(206),Me=a.n(Re),Ue=a(519),Pe=a(47),Le=a.n(Pe),We=a(203),Te=a.n(We),He=a(55),ze=a.n(He),Ye=Object(M.withStyles)(function(e){return{root:{borderBottom:"1px solid ".concat(e.palette.divider),margin:0,padding:2*e.spacing.unit},closeButton:{position:"absolute",right:e.spacing.unit,top:e.spacing.unit,color:e.palette.grey[500]}}})(function(e){var t=e.children,a=e.classes,n=e.onClose;return r.a.createElement(V.a,{disableTypography:!0,className:a.root},r.a.createElement(Q.a,{variant:"h6"},t),n?r.a.createElement(ve.a,{"aria-label":"Close",className:a.closeButton,onClick:n},r.a.createElement(ze.a,null)):null)}),Je=Object(M.withStyles)(function(e){return{root:{margin:0,padding:2*e.spacing.unit}}})(Y.a),Ve=Object(M.withStyles)(function(e){return{root:{borderTop:"1px solid ".concat(e.palette.divider),margin:0,padding:e.spacing.unit}}})(H.a),qe=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({open:e.open})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(W.a,{"aria-labelledby":"customized-dialog-title",open:this.state.open},r.a.createElement(Ye,{id:"customized-dialog-title"},"Terms of Service"),r.a.createElement(Je,null,r.a.createElement(Q.a,{gutterBottom:!0},"Payment processing services for [account holder term, e.g. drivers or sellers] on [platform name] are provided by Stripe and are subject to the Stripe Connected Account Agreement, which includes the Stripe Terms of Service (collectively, the \u201cStripe Services Agreement\u201d). By agreeing to [this agreement / these terms / etc.] or continuing to operate as a [account holder term] on [platform name], you agree to be bound by the Stripe Services Agreement, as the same may be modified by Stripe from time to time. As a condition of [platform name] enabling payment processing services through Stripe, you agree to provide [platform name] accurate and complete information about you and your business, and you authorize [platform name] to share it and transaction information related to your use of the payment processing services provided by Stripe.")),r.a.createElement(Ve,null,r.a.createElement(P.a,{onClick:function(){e.props.accepted()},color:"primary"},"Accept"),r.a.createElement(P.a,{onClick:function(){e.props.declined()},color:"primary"},"Decline"))))}}]),t}(n.Component),Qe=(a(192),"https://api.backendless.com/C499EC1A-F6D2-77C2-FFCF-14A634B64900/"+x[0]+"/"),Ke=function(e){function t(e){var a;Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={tos:!1,disabled:!1,username:"",openLogin:!1,openRegister:!1,password:"",formErrors:{email:"",password:"",name:"",registrationError:""},loginErrors:{username:"",password:"",loginError:""},registerName:"",registerPassword:"",registerEmail:"",emailValid:!1,passwordValid:!1,nameValid:!1,formValid:!1,loggedin:!1,anchorEl:null,mobileMoreAnchorEl:null},a.getPersistantUserData=function(e){var t=Object(p.a)(Object(p.a)(a));F.a.post(Qe+"services/UserHelper/retrieveUser",e,{headers:{"Content-Type":"application/json",Accept:"application/json","user-token":e}}).then(function(a){var n=a.data;console.log("Found Data",n),t.props.onInit(n),t.setState({loggedin:!0}),t.props.loggedIn(),t.props.handleClose();var r="name = '"+n.name+"'",o=se.a.DataQueryBuilder.create().setWhereClause(r);se.a.Data.of("Messaging").find(o).then(function(a){console.log("Persistant Data ",n);var r=a[0].objectId,o={messageID:r},s=n.objectId;F.a.put(Qe+"users/"+s,o,{headers:{"user-token":e}}).then(function(e){t.setupFiles(),null!==t.props.getUser().profile&&(se.a.Data.of("Messaging").findById(r).then(function(e){t.props.onMessageInit(e)}).catch(function(e){console.log("Error",e)}),F.a.get(t.props.getUser().profile).then(function(e){t.setState({disabled:!1}),t.props.onStoreInit(e.data)}).catch(function(e){console.log("Error",e)}))}).catch(function(e){console.log("Error Updating User",e.message)})}).catch(function(e){console.log("Error Finding Message",e.message)})}).catch(function(e){console.log("Error",e)})},a.handleClick=function(e){if(0===e)a.setState({openLogin:!0,openRegister:!1});else if(1===e)a.setState({openRegister:!0,openLogin:!1});else{var t=Object(p.a)(Object(p.a)(a)),n=t.props.getAuth();F.a.get(Qe+"users/logout",{headers:{"user-token":n}}).then(function(e){console.log("Logout",e.data),t.setState({loggedin:!1}),window.location.reload()}).catch(function(e){console.log("error "+e)})}},a.handleRegister=function(){var e=Object(p.a)(Object(p.a)(a));a.setState({disabled:!0,tos:!1},function(){var t=a.state.formErrors,n=a.state.registerName,r=a.state.registerPassword,o=a.state.registerEmail,s={email:o,name:n,password:r,profileData:n+"#"+o+"#0#0#"};F.a.post(Qe+"users/register",s).then(function(t){console.log("Register",t.data),e.setState({openRegister:!1,openLogin:!0});var a=t.data.objectId,r={name:n,userID:a};F.a.post(Qe+"data/Messaging",r).then(function(t){console.log("Messaging",t.data),e.setState({disabled:!1})}).catch(function(e){console.log("Error",e.message)})}).catch(function(a){t.password="",t.email="",t.username="",t.registrationError=a.message,e.setState({formErrors:t}),console.log("Error",a),e.setState({disabled:!1})})})},a.setupFiles=function(){var e=Object(p.a)(Object(p.a)(a)),t=new Blob([JSON.stringify([])],{type:"application/json"}),n="",r="",o="",s="",i="",l="",c="",u="profileData/"+e.props.getUser().objectId;if(null===a.props.getUser().profile){var d={country:"CA",type:"custom",email:e.props.getUser().email,default_currency:"cad",tos_acceptance:{date:Math.trunc(a.props.getUser().created/1e3),ip:a.props.ip}};console.log(" QUERY "+Te.a.stringify(d)),F.a.post(Qe+"/services/MyService/initStripe",d,{headers:{"Content-Type":"application/json"}}).then(function(t){console.log("Response",t),console.log("Response",t.data.data.id),e.props.getUser().StripeID=t.data.data.id,se.a.UserService.update(e.props.getUser()).then(function(e){}).catch(function(e){})}).catch(function(e){console.log("Error",e)}),se.a.Files.saveFile(u,"profileData.txt",t,!0).then(function(a){n=a,se.a.Files.saveFile(u,"sellingData.txt",t,!0).then(function(a){r=a,se.a.Files.saveFile(u,"sellingHistory.txt",t,!0).then(function(a){o=a,se.a.Files.saveFile(u,"buyingData.txt",t,!0).then(function(a){s=a,se.a.Files.saveFile(u,"buyingHistory.txt",t,!0).then(function(a){i=a,se.a.Files.saveFile(u,"buyingemails.txt",t,!0).then(function(a){l=a,se.a.Files.saveFile(u,"sellingemails.txt",t,!0).then(function(t){c=t,e.props.getUser().profile=n.fileURL,se.a.UserService.update(e.props.getUser()).then(function(t){var a="name = '"+e.props.getUser().name+"'",n=se.a.DataQueryBuilder.create().setWhereClause(a);se.a.Data.of("Messaging").find(n).then(function(t){var a=t[0];a.buyingEmails=l.fileURL,a.buyingDataGson=s.fileURL,a.buyingDataGsonHistory=i.fileURL,a.sellingDataGson=r.fileURL,a.sellingDataGsonHistory=o.fileURL,a.sellingEmails=c.fileURL,se.a.Data.of("Messaging").save(a).then(function(t){e.props.getUser().messageID=a.objectId,se.a.UserService.update(e.props.getUser()).then(function(t){F.a.get(e.props.getUser().profile).then(function(t){e.setState({disabled:!1}),e.props.onStoreInit(t.data)}).catch(function(e){console.log("Error",e)}),e.props.onMessageInit(t)}).catch()}).catch()}).catch(function(e){})}).catch()}).catch()}).catch()}).catch()}).catch()}).catch()}).catch()}).catch(function(e){console.log("ERROR",e)})}},a.loginBackendless=function(){var e=Object(p.a)(Object(p.a)(a));a.setState({disabled:!0},function(){var t=e.state.username,a=e.state.password,n=e.state.loginErrors,r=!0,o=" cannot be empty";if(0===a.length?(n.password=o,r=!1):n.password="",0===t.length?(n.username=o,r=!1):n.username="",e.setState({loginErrors:n}),r){var s={login:t,password:a};se.a.UserService.login(s.login,s.password).then(function(t){console.log("Login",t),e.props.onInit(t),e.setState({loggedin:!0}),e.props.loggedIn(),e.props.handleClose();var a="name = '"+s.login+"'",n=se.a.DataQueryBuilder.create().setWhereClause(a);se.a.Data.of("Messaging").find(n).then(function(t){var a=t[0].objectId,n={messageID:a},r=e.props.getUser().objectId;F.a.put(Qe+"users/"+r,n,{headers:{"user-token":e.props.getAuth()}}).then(function(t){e.setupFiles(),null!==e.props.getUser().profile&&(se.a.Data.of("Messaging").findById(a).then(function(t){e.props.onMessageInit(t)}).catch(function(e){console.log("Error",e)}),F.a.get(e.props.getUser().profile).then(function(t){e.setState({disabled:!1}),e.props.onStoreInit(t.data)}).catch(function(e){console.log("Error",e)}))}).catch(function(e){console.log("Error Updating User",e.message)})}).catch(function(e){console.log("Error Finding Message",e.message)})}).catch(function(t){e.setState({disabled:!1}),n.password="","Request failed with status code 401"===t.message&&(n.username=" or password is invalid",n.password="",n.loginError=""),"Request failed with status code 400"!==t.message&&3087!==t.code||(n.loginError=" Email has not been verified",n.username="",n.password=""),console.log("ERROR MESSAGE: "+t.code),e.setState({loginErrors:n})})}})},a.loginChange=function(e){var t=e.target.id,n=e.target.value;a.setState(Object(pe.a)({},t,n))},a.registerChange=function(e){var t=e.target.id,n=e.target.value;a.setState(Object(pe.a)({},t,n),function(){a.validateField(t,n)})};var n=a.props.cookies.get("AuthToken");return void 0!==n&&F.a.get(Qe+"users/isvalidusertoken/"+n).then(function(e){console.log("Result",e),e.data&&a.getPersistantUserData(n)}).catch(function(e){console.log("error "+e)}),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({openLogin:e.openLogin,openRegister:e.openRegister})}},{key:"validateField",value:function(e,t){var a=this.state.formErrors,n=this.state.emailValid,r=this.state.passwordValid,o=this.state.nameValid;switch(e){case"registerEmail":n=t.match(/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i),a.email=n?"":" is invalid";break;case"registerPassword":if(t.length>=6&&t.length<12||4===t.length)r=new RegExp("^(?=.*d)(?=.*[a-z])(?=.*[0-9])(?=.*[A-Z])(?=.[!@#$%^&]).{6,12}$").test(t),"test"===t&&(r=!0),a.password=r?"":" Does not contain Capitals or special charictars, if you use a passphrase (12+ chars) there are no specifications";else t.length>=12?(r=!0,a.password=""):(r=!1,a.password=" is too short");break;case"registerName":o=new RegExp("[^A-Za-z0-9]+").test(t),a.name=o?"no special characters":""}this.setState({formErrors:a,emailValid:n,passwordValid:r,nameValid:o},this.validateForm())}},{key:"validateForm",value:function(){this.setState({formValid:this.state.emailValid&&this.state.passwordValid&&this.state.nameValid})}},{key:"errorClass",value:function(e){return 0===e.length?"":"has-error"}},{key:"render",value:function(){var e=this;return r.a.createElement("span",null,r.a.createElement(W.a,{open:this.state.openLogin,onClose:this.props.handleClose,"aria-labelledby":"form-dialog-title"},r.a.createElement(V.a,{id:"form-dialog-title"},"Login"),r.a.createElement(Y.a,null,r.a.createElement(Le.a,null,"Something should probably go here, tag line maybe?"),r.a.createElement("div",{className:"panel panel-default warning"},r.a.createElement(Z,{formErrors:this.state.loginErrors})),r.a.createElement(G.a,{autoFocus:!0,margin:"dense",id:"username",value:this.state.username,label:"Username",type:"username",onChange:this.loginChange,required:!0,fullWidth:!0}),r.a.createElement(G.a,{margin:"dense",id:"password",value:this.state.password,label:"Password",type:"password",onChange:this.loginChange,required:!0,fullWidth:!0})),r.a.createElement(H.a,null,r.a.createElement(P.a,{hidden:this.state.loggedin,variant:"contained",color:"primary",onClick:function(){return e.handleClick(1)}},"Register"),r.a.createElement(P.a,{disabled:this.state.disabled,onClick:this.loginBackendless,color:"primary"},"Login"),r.a.createElement(P.a,{onClick:this.props.handleClose,color:"secondary"},"Cancel"))),r.a.createElement(W.a,{open:this.state.openRegister,onClose:this.props.handleClose,"aria-labelledby":"form-dialog-title"},r.a.createElement(V.a,{id:"form-dialog-title"},"Register"),r.a.createElement(Y.a,null,r.a.createElement(Le.a,null,"Please consider using a spam email service such as",r.a.createElement(P.a,{variant:"contained",href:"https://10minutemail.com",target:"_blank",className:"m-2"},"10 Minute Mail"),r.a.createElement("br",null),"For the purposes of Account recovery, just remember specific account details"),r.a.createElement("div",{className:"panel panel-default warning"},r.a.createElement(Z,{formErrors:this.state.formErrors})),r.a.createElement(G.a,{autoFocus:!0,margin:"dense",id:"registerEmail",label:"Email Address",type:"email",required:!0,fullWidth:!0,onChange:this.registerChange}),r.a.createElement(G.a,{margin:"dense",id:"registerName",label:"UserName",type:"username",fullWidth:!0,required:!0,onChange:this.registerChange}),r.a.createElement(G.a,{margin:"dense",id:"registerPassword",label:"Password",type:"password",required:!0,fullWidth:!0,onChange:this.registerChange})),r.a.createElement(H.a,null,r.a.createElement(P.a,{variant:"contained",color:"primary",onClick:function(){return e.handleClick(0)}},"Login"),r.a.createElement(P.a,{disabled:!(0===this.state.formErrors.email.length&&0===this.state.formErrors.name.length&&0===this.state.formErrors.password.length)||0===this.state.registerName.length||0===this.state.registerEmail.length||0===this.state.registerPassword.length||this.state.disabled,hidden:this.state.loggedin,onClick:function(){e.setState({tos:!0})},color:"primary"},"Register"),r.a.createElement(P.a,{onClick:this.props.handleClose,color:"secondary"},"Cancel"))),r.a.createElement(qe,{open:this.state.tos,accepted:this.handleRegister,declined:function(){e.props.declined()}}))}}]),t}(n.Component),Ge=Object(M.withStyles)(function(e){return{root:{width:"100%"},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},title:Object(pe.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(pe.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(ke.fade)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(ke.fade)(e.palette.common.white,.25)},marginRight:2*e.spacing.unit,marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:3*e.spacing.unit,width:"auto"}),searchIcon:{width:9*e.spacing.unit,height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit",width:"100%"},inputInput:Object(pe.a)({paddingTop:e.spacing.unit,paddingRight:e.spacing.unit,paddingBottom:e.spacing.unit,paddingLeft:10*e.spacing.unit,transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:200}),sectionDesktop:Object(pe.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(pe.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"})}})(Object(A.b)(Ke)),Ze="https://api.backendless.com/C499EC1A-F6D2-77C2-FFCF-14A634B64900/"+x[0]+"/",Xe=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={tos:!1,disabled:!1,openLogin:!1,openRegister:!1,username:"",password:"",formErrors:{email:"",password:"",name:"",registrationError:""},loginErrors:{username:"",password:"",loginError:""},registerName:"",registerPassword:"",registerEmail:"",emailValid:!1,passwordValid:!1,nameValid:!1,formValid:!1,loggedin:!1,anchorEl:null,mobileMoreAnchorEl:null},a.handleClick=function(e){if(0===e)a.setState({openLogin:!0,openRegister:!1});else if(1===e)a.setState({openRegister:!0,openLogin:!1});else{var t=Object(p.a)(Object(p.a)(a)),n=t.props.getAuth();F.a.get(Ze+"users/logout",{headers:{"user-token":n}}).then(function(e){console.log("Logout",e.data),t.setState({loggedin:!1}),a.props.onLogOut()}).catch(function(e){console.log("error "+e)})}},a.handleClose=function(){a.setState({openLogin:!1,openRegister:!1})},a.handleProfileMenuOpen=function(e){a.setState({anchorEl:e.currentTarget})},a.handleMenuClose=function(){a.setState({anchorEl:null}),a.handleMobileMenuClose()},a.handleMobileMenuOpen=function(e){a.setState({mobileMoreAnchorEl:e.currentTarget})},a.handleMobileMenuClose=function(){a.setState({mobileMoreAnchorEl:null})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"errorClass",value:function(e){return 0===e.length?"":"has-error"}},{key:"render",value:function(){var e=this,t=this.state,a=t.anchorEl,n=t.mobileMoreAnchorEl,o=this.props.classes,s=Boolean(a),i=Boolean(n),l=r.a.createElement(_.a,{anchorEl:a,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:s,onClose:this.handleMenuClose},r.a.createElement(ee.a,{onClick:function(){return e.handleMenuClose()}},"Buyer Profile"),r.a.createElement(Ue.a,{to:"/sellerProfile"},r.a.createElement(ee.a,{onClick:function(){return e.handleMenuClose()}},"Seller Profile")),r.a.createElement(ee.a,{onClick:function(){return e.handleMenuClose()}},"My account")),c=r.a.createElement(_.a,{anchorEl:n,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:i,onClose:this.handleMobileMenuClose},r.a.createElement(Ue.a,{to:"/mailBox"},r.a.createElement(ee.a,null,r.a.createElement(ve.a,{color:"inherit"},r.a.createElement(Se.a,{badgeContent:4,color:"secondary"},r.a.createElement(Fe.a,null))),r.a.createElement("p",null,"Messages"))),r.a.createElement(Ue.a,{to:"/"},r.a.createElement(ee.a,null,r.a.createElement(ve.a,{color:"inherit"},r.a.createElement(Ne.a,null)),r.a.createElement("p",null,"HomePage"))),r.a.createElement(ee.a,{onClick:this.handleProfileMenuOpen},r.a.createElement(ve.a,{color:"inherit"},r.a.createElement(xe.a,{onClick:this.handleProfileMenuOpen})),r.a.createElement("p",null,"Profile")));return r.a.createElement("span",null,r.a.createElement("div",{className:o.root},r.a.createElement(fe.a,{position:"static"},r.a.createElement(be.a,null,r.a.createElement(Q.a,{className:o.title,variant:"h4",color:"inherit",noWrap:!0},"HalfNHalf"),r.a.createElement("div",{className:o.search},r.a.createElement("div",{className:o.searchIcon},r.a.createElement(je.a,null)),r.a.createElement(Ce.a,{placeholder:"Search Our Stores\u2026",classes:{root:o.inputRoot,input:o.inputInput}})),r.a.createElement(Ue.a,{to:"/"},r.a.createElement(P.a,{className:"m-2",hidden:!this.state.loggedin,variant:"contained",color:"secondary",onClick:function(){return e.handleClick(2)}},"LogOut")),r.a.createElement(P.a,{className:"m-2",hidden:this.state.loggedin,variant:"contained",color:"primary",onClick:function(){return e.handleClick(0)}},"Login"),r.a.createElement(P.a,{hidden:this.state.loggedin,variant:"contained",color:"primary",onClick:function(){return e.handleClick(1)}},"Register"),r.a.createElement(Ge,{onInit:this.props.onInit,onMessageInit:this.props.onMessageInit,onStoreInit:this.props.onStoreInit,getAuth:this.props.getAuth,getUser:this.props.getUser,ip:this.props.ip,openLogin:this.state.openLogin,openRegister:this.state.openRegister,openTos:this.state.tos,loggedIn:function(){e.setState({loggedin:!0})},handleClose:this.handleClose,declined:function(){e.setState({tos:!1})}}),r.a.createElement("div",{className:o.grow}),r.a.createElement("div",{className:o.sectionDesktop},r.a.createElement(ve.a,{hidden:!this.state.loggedin,color:"primary"},r.a.createElement(Ue.a,{to:"/"},r.a.createElement(Ne.a,null))),r.a.createElement(ve.a,{hidden:!this.state.loggedin,color:"primary"},r.a.createElement(Se.a,{badgeContent:-10,color:"secondary"},r.a.createElement(Ue.a,{to:"/mailBox"},r.a.createElement(Fe.a,null)))),r.a.createElement(ve.a,{hidden:!this.state.loggedin,"aria-owns":s?"material-appbar":void 0,"aria-haspopup":"true",onClick:this.handleProfileMenuOpen,color:"inherit"},r.a.createElement(xe.a,null))),r.a.createElement("div",{className:o.sectionMobile},r.a.createElement(ve.a,{hidden:!this.state.loggedin,"aria-haspopup":"true",onClick:this.handleMobileMenuOpen,color:"inherit"},r.a.createElement(Me.a,null))))),l,c))}}]),t}(n.Component),_e=Object(M.withStyles)(function(e){return{root:{width:"100%"},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},title:Object(pe.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(pe.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(ke.fade)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(ke.fade)(e.palette.common.white,.25)},marginRight:2*e.spacing.unit,marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:3*e.spacing.unit,width:"auto"}),searchIcon:{width:9*e.spacing.unit,height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit",width:"100%"},inputInput:Object(pe.a)({paddingTop:e.spacing.unit,paddingRight:e.spacing.unit,paddingBottom:e.spacing.unit,paddingLeft:10*e.spacing.unit,transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:200}),sectionDesktop:Object(pe.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(pe.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"})}})(Xe),$e=a(73),et=a.n($e),tt=a(56),at=a.n(tt),nt=a(111),rt=a.n(nt),ot=a(211),st=a(40),it=a.n(st),lt=a(45),ct=a.n(lt),ut=a(48),dt=a.n(ut),mt=a(224),ht=a(46),pt=a.n(ht),gt=a(88),ft=a.n(gt),Et=a(54),bt=a.n(Et),At=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={snackbar:!1,open:!1,disabled:!0,term:"",openPeriod:!1,Errors:{date:"",amount:"",rate:""},atCost:!1,currentAmnt:0,totalAmnt:0,period:30,currentDate:{day:(new Date).getDate(),month:(new Date).getMonth()+1,year:(new Date).getFullYear(),minute:1,second:1,hour:1},limit:!0,rate:25,reoccuring:!0,resetDate:{day:(new Date).getDate(),month:(new Date).getMonth()+1,year:(new Date).getFullYear(),minute:1,second:1,hour:1,tempDate:""},selected:0,selectedAmnt:0,text:"No Limitations",anchorEl:null,mobileMoreAnchorEl:null},a.resetStateValues=function(){a.setState({snackbar:!1,open:a.state.open,disabled:!0,term:"",openPeriod:!1,Errors:{date:"",amount:"",rate:""},atCost:!1,currentAmnt:0,totalAmnt:0,period:30,currentDate:{day:(new Date).getDate(),month:(new Date).getMonth()+1,year:(new Date).getFullYear(),minute:1,second:1,hour:1},limit:!0,rate:25,reoccuring:!0,resetDate:{day:(new Date).getDate(),month:(new Date).getMonth()+1,year:(new Date).getFullYear(),minute:1,second:1,hour:1,tempDate:""},selected:0,selectedAmnt:0,text:"No Limitations",anchorEl:null,mobileMoreAnchorEl:null})},a.isBefore=function(e,t){return e.year<t.year||!(e.year>t.year)&&(e.month<t.month||!(e.month>t.month)&&(e.day<t.day||!(e.day>t.day)))},a.generateGuid=function(){var e,t;for(e="",t=0;t<32;t++)8!==t&&12!==t&&16!==t&&20!==t||(e+="-"),e+=Math.floor(16*Math.random()).toString(16).toUpperCase();return e},a.handleOpen=function(){a.resetStateValues(),a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a.handleOpenP=function(){a.setState({openPeriod:!0})},a.handleCloseP=function(){a.setState({openPeriod:!1})},a.handleCloseS=function(){a.setState({snackbar:!1})},a.getDealType=function(e){return!1===e?"Normal":"Factory +  Discount"},a.handleDelete=function(e,t){a.props.onDealDelete(e,t)},a.handleEdit=function(e,t){a.setState({snackbar:!0})},a.valChange=function(e){var t,n=e.target.id;"period"===e.target.name&&(n=e.target.name,a.setState({term:a.getPeriod(e.target.value)},function(){a.validateField(n)})),"atCost"===n?t=e.target.checked:"currentAmnt"===n||"totalAmnt"===n?(t=e.target.value)>10&&(t=10):t=e.target.value,a.setState(Object(pe.a)({},n,t),function(){a.validateField(n)})},a.handleChange=function(e,t){a.setState({rate:t},function(){a.validateField("rate")})},a.handleDateChange=function(e){var t=e.toString().split(" "),n=0;switch(t[1]){case"Jan":n=1;break;case"Feb":n=2;break;case"Mar":n=3;break;case"Apr":n=4;break;case"May":n=5;break;case"Jun":n=6;break;case"Jul":n=7;break;case"Aug":n=8;break;case"Sep":n=9;break;case"Oct":n=10;break;case"Nov":n=11;break;case"Dec":n=12}a.setState({resetDate:{day:parseInt(t[2]),month:n,year:parseInt(t[3]),minute:1,second:1,hour:1,tempDate:e}},function(){a.validateField("resetDate")})},a.validateErrors=function(){var e=a.state.Errors.date.length>1||a.state.Errors.amount.length>1;a.setState({disabled:e})},a.handleClick=function(){var e=a.state.Errors,t=a.state.disabled;a.state.resetDate.tempDate.length<1&&(t=!0,e.date=" Please select a Reset date"),a.isBefore(a.state.resetDate,a.state.currentDate)&&(t=!0,e.date=" Please select a Reset date In the future"),a.state.currentAmnt>a.state.totalAmnt?(t=!0,e.amount=" The Current Amount cannot be greater than the Total Amount"):0===a.state.totalAmnt&&(t=!0,e.amount=" The Total Amount cannot be 0");var n=a.generateGuid();a.setState({Errors:e,disabled:t,id:n},function(){if(!1===t){var e=a.state,n=e.atCost,r=e.currentAmnt,o=e.totalAmnt,s=e.period,i=e.rate,l=e.resetDate,c=e.currentDate,u={atCost:n,currentAmnt:r,totalAmnt:o,rate:i,text:e.text,reoccuring:e.reoccuring,limit:e.limit,period:s,selected:e.selected,selectedAmnt:e.selectedAmnt,currentDate:c,id:e.id,resetDate:{day:l.day,month:l.month,year:l.year,minute:l.minute,hour:l.hour,second:l.second}};a.props.onDealCreate(a.props.storecard,u),a.handleClose()}})},a.getPeriod=function(e){switch(e){case 7:return"Weekly";case 14:return"BiWeekly";case 30:return"Monthly";case 60:return"BiMonthly";case 90:return"Quarterly";case 180:return"Semi-Yearly";case 360:return"Yearly";case 720:return"BiYearly";case 1080:return"TriYearly";default:return"Monthly"}},a.stringDivider=function(e,t,n){if(e.length>t){for(var r=t;r>0&&" "!==e[r];r--);if(r>0){var o=e.substring(0,r),s=e.substring(r+1);return o+n+a.stringDivider(s,t,n)}}return e},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"validateField",value:function(e){var t=this,a=this.state.Errors;switch(e){case"currentAmnt":this.state.currentAmnt>this.state.totalAmnt?a.amount=" The Current Amount cannot be greater than the Total Amount":a.amount="";break;case"totalAmnt":this.state.currentAmnt>this.state.totalAmnt?a.amount=" The Current Amount cannot be greater than the Total Amount":0===this.state.totalAmnt?a.amount=" The Total Amount cannot be 0":a.amount="";break;case"rate":this.state.rate<10?a.rate=" less than 10% may not be worth your time":a.rate="";break;case"resetDate":this.isBefore(this.state.resetDate,this.state.currentDate)?a.date=" Please select a Reset date In the future":this.state.resetDate.tempDate.length<2?a.date=" Please select a Reset date":a.date=""}this.setState({Errors:a},function(){t.validateErrors()})}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.rate,o=a.resetDate,s=a.term,i=[{Header:"Edit",id:"button",accessor:function(e){return e},maxWidth:180,Cell:function(t){return r.a.createElement("span",null,r.a.createElement("button",{onClick:function(){return e.handleEdit(e.props.storecard,t.original)},className:"btn btn-secondary btn-sm m-2 btnhvr"},"Edit"),r.a.createElement("button",{onClick:function(){return e.handleDelete(e.props.storecard,t.original)},className:"btn btn-secondary btn-sm m-2 btnhvr"},"Delete"))}},{Header:"Type",id:"atcost",maxWidth:150,accessor:function(t){return e.getDealType(t.atCost)}},{Header:"Rate",id:"rate",maxWidth:70,accessor:function(e){return e.rate},Cell:function(e){return r.a.createElement("span",{className:"number"},e.value,"%")}},{Header:"Amount",id:"totalAmnt",maxWidth:70,accessor:function(e){return e},Cell:function(e){return r.a.createElement("span",null,e.value.currentAmnt," / ",e.value.totalAmnt)}},{Header:"Restrictions",id:"text",accessor:function(e){return e.text},Cell:function(e){return r.a.createElement("span",{className:"text"},e.value)}}];return r.a.createElement(et.a,{className:t.card},r.a.createElement(at.a,null,r.a.createElement(Q.a,{className:t.title,color:"textSecondary",gutterBottom:!0},this.props.storecard.ID),r.a.createElement(Q.a,{variant:"h5",component:"h2"},this.props.storecard.name),r.a.createElement(Q.a,{className:t.pos,color:"textSecondary"},this.props.storecard.address),r.a.createElement("br",null),r.a.createElement("center",null,r.a.createElement(R.a,{data:this.props.storecard.storeDeals,columns:i,defaultPageSize:this.props.storecard.storeDeals.length,className:"-striped -highlight",resizable:!1,noDataText:!1,showPageSizeOptions:!1,showPageJump:!1,showPagination:!1})),r.a.createElement("div",null,r.a.createElement(bt.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.snackbar,autoHideDuration:6e3,onClose:this.handleCloseS,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},"Edit currently not working, please Create a new Deal"),action:[r.a.createElement(ve.a,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:this.handleCloseS},r.a.createElement(ze.a,null))]})),r.a.createElement(P.a,{onClick:this.handleOpen,variant:"contained",color:"primary"},"Add Deal"),r.a.createElement(W.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},r.a.createElement(V.a,{id:"form-dialog-title"},"Add New Deal"),r.a.createElement(Y.a,null,r.a.createElement(Le.a,null,"Please keep a reasonable limit or we may have to limit your account"),r.a.createElement("div",{className:"panel panel-default warning"},r.a.createElement(Z,{formErrors:this.state.Errors})),r.a.createElement(G.a,{autoFocus:!0,margin:"dense",id:"text",label:"Any Constraints?",type:"text",onChange:this.valChange,required:!0,inputProps:{maxLength:100},fullWidth:!0}),r.a.createElement(Q.a,{id:"label"},this.state.text.length,"/100"),r.a.createElement("center",null,r.a.createElement(Q.a,{id:"label"},"Amount of Discounts")),r.a.createElement("center",null,r.a.createElement(it.a,{type:"number",onChange:this.valChange,required:!0,inputProps:{min:"0",max:"10",step:"1"},id:"currentAmnt",placeholder:"Current"}),"\u2003",r.a.createElement(it.a,{type:"number",onChange:this.valChange,required:!0,inputProps:{min:"0",max:"10",step:"1"},id:"totalAmnt",placeholder:"Total"})),r.a.createElement("br",null),r.a.createElement("center",null,r.a.createElement(ot.a,{control:r.a.createElement(rt.a,{checked:this.state.checkedB,onChange:this.valChange,id:"atCost",value:"checkedB",color:"primary"}),label:"At Factory Cost?"}),r.a.createElement(dt.a,{container:!0,className:t.grid,justify:"space-around"},r.a.createElement("div",{className:t.root},r.a.createElement(Q.a,{id:"label"},"Discount Rate"),r.a.createElement(re.a,{classes:{container:t.slider},value:n,required:!0,min:5,max:100,step:5,id:"rate",onChange:this.handleChange}),r.a.createElement(Q.a,{id:"label"},this.state.rate,"%"))),r.a.createElement(dt.a,{container:!0,className:t.grid,justify:"space-around"},r.a.createElement(mt.a,{id:"resetDate",required:!0,margin:"normal",anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},label:"Next Reset Date",value:o.tempDate,onChange:this.handleDateChange})),r.a.createElement("form",{autoComplete:"off"},r.a.createElement(pt.a,{className:t.formControl},r.a.createElement(ct.a,{htmlFor:"period"},r.a.createElement(Q.a,{id:"label"},"Select Renewal Period")),r.a.createElement("br",null),r.a.createElement(ft.a,{open:this.state.openPeriod,onClose:this.handleCloseP,onOpen:this.handleOpenP,required:!0,value:s,onChange:this.valChange,inputProps:{name:"period",id:"period"}},r.a.createElement(ee.a,{value:7},"Weekly"),r.a.createElement(ee.a,{value:14},"BiWeekly"),r.a.createElement(ee.a,{value:30},"Monthly"),r.a.createElement(ee.a,{value:60},"BiMonthly"),r.a.createElement(ee.a,{value:90},"Quarterly"),r.a.createElement(ee.a,{value:180},"Semi-Yearly"),r.a.createElement(ee.a,{value:360},"Yearly"),r.a.createElement(ee.a,{value:720},"BiYearly"),r.a.createElement(ee.a,{value:1080},"TriYearly")))))),r.a.createElement(H.a,null,r.a.createElement(P.a,{onClick:this.handleClick,color:"primary",variant:"outlined",disabled:this.state.disabled},"Submit"),r.a.createElement(P.a,{onClick:this.handleClose,color:"secondary"},"Cancel"))),r.a.createElement("br",null),r.a.createElement(P.a,{onClick:function(){return e.props.onDelete(e.props.storecard.ID)},variant:"contained",color:"secondary"},"Delete Store")))}}]),t}(n.Component),vt=Object(M.withStyles)(function(e){return{card:{minWidth:275},close:{padding:e.spacing.unit/2},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12},root:{width:300},slider:{padding:"22px 0px"},grid:{width:"60%"},button:{display:"block",marginTop:2*e.spacing.unit},formControl:{margin:e.spacing.unit,minWidth:120}}})(At),yt=a(92),Ct={position:"absolute",width:"100%",height:"100%"},Dt=function(e){function t(e){var a;Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={currentLocation:{lat:0,lng:0},places:[],updated:!1},a.onReady=function(){if(a.props.address.length>2&&!1===a.state.updated){a.setState({updated:!0});var e=a.props.google,t=new e.maps.places.PlacesService(a.map),n={location:a.state.currentLocation,name:a.props.address,radius:"5000",fields:["place_id","formatted_address","name","rating","opening_hours"]};t.nearbySearch(n,function(t,n){n===e.maps.places.PlacesServiceStatus.OK&&a.setState({places:t},function(){a.props.Found(a.state.places)})})}};var n=a.props.initialCenter,r=n.lat,o=n.lng;return a.state={currentLocation:{lat:r,lng:o}},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e,t){e.google!==this.props.google&&this.loadMap(),t.currentLocation!==this.state.currentLocation&&this.recenterMap()}},{key:"recenterMap",value:function(){this.setState({updated:!1});var e=this.map,t=this.state.currentLocation,a=this.props.google.maps;if(e){var n=new a.LatLng(t.lat,t.lng);e.panTo(n)}}},{key:"componentDidMount",value:function(){var e=this;this.props.centerAroundCurrentLocation&&navigator&&navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(t){var a=t.coords;e.setState({currentLocation:{lat:a.latitude,lng:a.longitude}})}),this.loadMap()}},{key:"loadMap",value:function(){if(this.props&&this.props.google){var e=this.props.google.maps,t=this.refs.map,a=s.a.findDOMNode(t),n=this.props.zoom,r=this.state.currentLocation,o=r.lat,i=r.lng,l=new e.LatLng(o,i),c=Object.assign({},{center:l,zoom:n});this.map=new e.Map(a,c)}}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.address;e.address!==t&&this.setState({updated:!1},this.onReady)}},{key:"renderChildren",value:function(){var e=this,t=this.props.children;if(t)return r.a.Children.map(t,function(t){if(t)return r.a.cloneElement(t,{map:e.map,google:e.props.google,mapCenter:e.state.currentLocation})})}}]),Object(u.a)(t,[{key:"render",value:function(){var e=Object.assign({},Ct);return r.a.createElement("div",null,r.a.createElement("div",{style:e,ref:"map"},"Loading map..."),this.renderChildren())}}]),t}(r.a.Component),St=Dt;Dt.defaultProps={zoom:14,initialCenter:{lat:-1.2884,lng:36.8233},centerAroundCurrentLocation:!1,visible:!0};var kt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).infoWindowRef=r.a.createRef(),a.onInfoWindowOpen=a.onInfoWindowOpen.bind(Object(p.a)(Object(p.a)(a))),a.containerElement||(a.containerElement=document.createElement("div")),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"onInfoWindowOpen",value:function(){s.a.render(r.a.Children.only(this.props.children),this.containerElement),this.infoWindowRef.current.infowindow.setContent(this.containerElement)}},{key:"render",value:function(){return r.a.createElement(yt.InfoWindow,Object.assign({onOpen:this.onInfoWindowOpen,ref:this.infoWindowRef},this.props))}}]),t}(n.Component),Ot=(a(504),0),jt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={storeData:[],open:!1,ID:"",address:"",buyer:"",name:"",seller:"",isNew:!1,dealProgression:0,storeDeals:[{}],query:"",imageResource:0,places:[],markerObjects:[],showingInfoWindow:!0,activeMarker:{},selectedPlace:{name:"",data:{vicinity:"",place_id:""}}},a.resetStateValues=function(){a.setState({open:!0,ID:"",address:"",buyer:"",name:"",seller:"",isNew:!1,dealProgression:0,storeDeals:[{}],query:"",imageResource:0,places:[],markerObjects:[],showingInfoWindow:!0,activeMarker:{},selectedPlace:{name:"",data:{vicinity:"",place_id:""}},Errors:{address:""}})},a.fillPlaces=function(e){a.setState({places:e})},a.onMarkerClick=function(e,t,n){return a.setState({selectedPlace:e,activeMarker:t,showingInfoWindow:!0})},a.onClose=function(e){a.state.showingInfoWindow&&a.setState({showingInfoWindow:!1,activeMarker:null})},a.changeAddress=function(e){a.setState({address:e.target.value,places:[],markerObjects:[],showingInfoWindow:!1,activeMarker:{}})},a._handleKeyPress=function(e){"Enter"===e.key&&a.setState({address:e.target.value,query:e.target.value})},a.handleRegister=function(){var e=a.state.selectedPlace.data,t={StoreID:e.place_id,Name:e.name,Lat:e.geometry.location.lat(),Long:e.geometry.location.lng()};a.props.onCreate(t,e),a.handleClose()},a.handleOpen=function(){a.resetStateValues()},a.handleClose=function(){a.setState({open:!1})},a.getDisplayInfo=function(){if("undefined"!==a.state.selectedPlace)return r.a.createElement("center",null,r.a.createElement(Q.a,null,"Name: ",a.state.selectedPlace.name),r.a.createElement(Q.a,null,"Address: ",a.state.selectedPlace.data.vicinity),r.a.createElement(Q.a,null,"Place ID: ",a.state.selectedPlace.data.place_id))},a.onMarkerMounted=function(e){e?a.setState(function(t){return{markerObjects:[].concat(Object(l.a)(t.markerObjects),[e.marker])}}):a.setState(function(e){return{markerObjects:[]}})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.storeData;if(e.storeData!==t||1===Ot){Ot+=1;var a=t.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0});this.setState({storeData:a})}}},{key:"render",value:function(){var e=this,t=this.props,a=t.onDealDelete,n=t.onDealEdit,o=t.onDelete,s=t.onDealCreate,i=this.state.places;return r.a.createElement("span",null,r.a.createElement(P.a,{onClick:this.handleOpen,variant:"contained",color:"primary"},"Add Store"),this.state.storeData.map(function(e){return r.a.createElement(vt,{key:e.ID,onDelete:o,onDealCreate:s,onDealDelete:a,onDealEdit:n,storecard:e})}),r.a.createElement(W.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"form-dialog-title",fullScreen:!0},r.a.createElement(V.a,{id:"form-dialog-title"},"Add Store"),r.a.createElement(Y.a,null,r.a.createElement(Le.a,null,"Something should probably go here, tag line maybe?"),r.a.createElement("div",{className:"panel panel-default warning"},r.a.createElement(Z,{formErrors:this.state.Errors})),r.a.createElement("div",{className:"rowC"},r.a.createElement(G.a,{autoFocus:!0,margin:"dense",id:"address",value:this.state.address,label:"Store Name",type:"text",onChange:this.changeAddress,onKeyPress:this._handleKeyPress,required:!0,fullWidth:!0}),r.a.createElement(P.a,{onClick:function(){e.handleClose()},color:"secondary"},"Close Map")),r.a.createElement(St,{centerAroundCurrentLocation:!0,google:this.props.google,address:this.state.query,Found:this.fillPlaces},i.map(function(t){return r.a.createElement(yt.Marker,{onClick:e.onMarkerClick,ref:e.onMarkerMounted,data:t,key:t.place_id,title:t.name,name:t.name,position:{lat:t.geometry.location.lat(),lng:t.geometry.location.lng()}})}),r.a.createElement(kt,{marker:this.state.activeMarker,visible:this.state.showingInfoWindow},r.a.createElement("div",null,this.getDisplayInfo(),r.a.createElement(P.a,{variant:"contained",color:"primary",onClick:this.handleRegister},"Register"),r.a.createElement(P.a,{onClick:function(){e.handleClose()},color:"secondary"},"Cancel"))))),r.a.createElement(H.a,null)))}}]),t}(n.Component),wt=Object(yt.GoogleApiWrapper)({apiKey:x[2]})(jt),xt=a(3),It=a.n(xt),Ft=a(113),Bt=a.n(Ft),Nt=a(114),Rt=a.n(Nt),Mt=a(115),Ut=a.n(Mt),Pt=a(143),Lt=a.n(Pt),Wt=a(223),Tt=a.n(Wt),Ht=a(212),zt=a(65),Yt=a.n(zt),Jt=a(91),Vt=a.n(Jt),qt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){return function(t){a.setState(Object(pe.a)({},e,t.target.checked))}},a.valChange=function(e){var t=e.target.value,n=e.target.id;a.setState(Object(pe.a)({},n,t))},a.handleClose=function(){var e;"Seller"===a.props.folder?e=!1:"Buyer"===a.props.folder&&(e=!0),a.setState({open:!1,buying:e,mail:{},money:!1,value:0,text:"",to:""}),a.props.close()},a.handleSendMail=function(){var e,t=Object(p.a)(Object(p.a)(a)),n=a.props.getMessage,r={from:"Admin",to:a.state.to,content:a.state.text,seen:!1},o={id:a.props.mail.id,from:"Admin",to:a.state.to,storeName:a.props.mail.storeName,selectedDeal:a.props.mail.selectedDeal,subject:a.props.mail.amnt+" of "+a.props.mail.link,content:a.state.text,money:a.state.money,value:a.state.value,imageLinks:[],seen:!1,completed:!1,reply:[]},s="";"Seller"===a.props.folder?(e="sellingemails.txt",s=n.sellingEmails):"Buyer"===a.props.folder&&(e="buyingemails.txt",s=n.buyingEmails);var i="name = '"+t.state.to+"'",l=a.state.buying,c=a.state.money,u=a.state.value;F.a.get(s).then(function(a){for(var n=a.data,s=t.props.mail.id,d=0;d<n.length;d++)if(n[d].id===s){n[d].money=c,n[d].value=u;var m=n[d].reply;m.push(r),n[d].reply=m}var h="profileData/"+t.props.objectId+"/",p=new Blob([JSON.stringify(n)],{type:"application/json"});se.a.Files.saveFile(h,e,p,!0).then(function(e){var a=se.a.DataQueryBuilder.create().setWhereClause(i);se.a.Data.of("Messaging").find(a).then(function(e){var a="";a=t.state.buying?e[0].buyingEmails:e[0].sellingEmails,F.a.get(a).then(function(t){var a=t.data;console.log("Other Emailer",t.data);for(var n=!1,i=0;i<a.length;i++)if(a[i].id===s){a[i].money=c,a[i].value=u,n=!0;var d=a[i].reply;d.push(r),a[i].reply=d}!1===n&&a.push(o);var m="profileData/"+e[0].userID+"/",h=new Blob([JSON.stringify(a)],{type:"application/json"}),p="";p=l?"buyingemails.txt":"sellingemails.txt",se.a.Files.saveFile(m,p,h,!0).then(function(e){}).catch(function(e){console.log("Error",e)})}).catch(function(e){console.log("Error",e)})}).catch(function(e){console.log("Error",e)})}).catch(function(e){console.log("Error",e)})}).catch(function(e){console.log("Error",e)}),a.setState({buying:!0,open:!1,mail:{},text:"",to:"",value:0,money:!1},function(){a.props.close()})},a.state={open:a.props.show,mail:{}},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e){if(void 0!==e.mail){var t=!1,a=0;void 0!==e.money&&(t=e.mail.money,a=e.mail.value),this.setState({buying:!0,open:e.show,mail:e.mail,money:t,value:a,text:"",to:""})}}},{key:"render",value:function(){return r.a.createElement(W.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"form-dialog-title",maxWidth:"md",fullWidth:!0},r.a.createElement(V.a,{id:"form-dialog-title"},"Email to:"),r.a.createElement(Y.a,null,r.a.createElement(Yt.a,{component:"label"}," Selling Inbox "),r.a.createElement(Vt.a,{checked:this.state.buying,onChange:this.handleChange("buying"),value:"buying"}),r.a.createElement(Yt.a,{component:"label"}," Buying Inbox "),r.a.createElement("br",null),r.a.createElement("div",{hidden:!this.state.buying},r.a.createElement(Vt.a,{checked:this.state.money,onChange:this.handleChange("money"),value:"money"}),r.a.createElement(Yt.a,{component:"label"},"Send Buy Order")),r.a.createElement(G.a,{margin:"dense",id:"to",label:"To: ",type:"text",onChange:this.valChange,required:!0,multiline:!0,fullWidth:!0}),r.a.createElement(G.a,{margin:"dense",id:"text",label:"Content",type:"text",onChange:this.valChange,required:!0,multiline:!0,fullWidth:!0}),r.a.createElement(G.a,{hidden:!this.state.money,margin:"dense",id:"value",label:"Price: ",type:"value",onChange:this.valChange,required:!0,multiline:!0,fullWidth:!0})),r.a.createElement(H.a,null,r.a.createElement(P.a,{onClick:this.handleClose,color:"primary"},"Cancel"),r.a.createElement(P.a,{disabled:this.state.disabled,onClick:this.handleSendMail,color:"primary"},"Send")))}}]),t}(n.Component),Qt=a(76),Kt=(a(510),a(149)),Gt=a.n(Kt),Zt=a(222),Xt=function(){},_t=function(e){},$t=function(){},ea=function(){},ta=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).submit=a.submit.bind(Object(p.a)(Object(p.a)(a))),a.state={money:a.props.money,completed:!1},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"submit",value:function(){var e=Object(Zt.a)(Gt.a.mark(function e(t){var a,n,r,o;return Gt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=this,t.preventDefault(),e.next=4,this.props.stripe.createToken({name:"Name"});case 4:n=e.sent,r=n.token,console.log("TOKEN",r),o={token:r.id,amount:100*this.state.money},se.a.CustomServices.invoke("Stripe","charge",o).then(function(e){var t=se.a.Messaging.subscribe("stripe"),n="id = '"+e.id+"'";t.addMessageListener(n,function(e){a.setState({completed:!0}),console.log("Message received: "+e)})}).catch(function(e){console.log("Error",e)});case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.completed?r.a.createElement(Q.a,{variant:"h4",color:"inherit",noWrap:!0},"Purchase Complete"):r.a.createElement("div",null,r.a.createElement("label",null,"Credit Card details"),r.a.createElement("div",{style:{width:.45*window.innerWidth}},r.a.createElement(Qt.CardElement,Object.assign({className:"form-control",onBlur:Xt,onChange:_t,onFocus:$t,onReady:ea},(this.props.fontSize,{style:{base:{fontSize:"16px",color:"#495057",fontFamily:'-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"',"::placeholder":{color:"#868e96"}},invalid:{color:"#9e2146"}}})))),r.a.createElement(P.a,{onClick:this.submit,color:"primary"},"Checkout"))}}]),t}(r.a.Component),aa=Object(Qt.injectStripe)(ta),na=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(d.a)(this,Object(m.a)(t).call(this))).state={elementFontSize:window.innerWidth<450?"14px":"18px"},window.addEventListener("resize",function(){window.innerWidth<450&&"14px"!==e.state.elementFontSize?e.setState({elementFontSize:"14px"}):window.innerWidth>=450&&"18px"!==e.state.elementFontSize&&e.setState({elementFontSize:"18px"})}),e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state.elementFontSize;return r.a.createElement("center",{className:"Checkout"},r.a.createElement(Qt.Elements,null,r.a.createElement(aa,{money:this.props.money,fontSize:e})))}}]),t}(r.a.Component),ra=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={expanded:!1,isAdmin:!1,checkout:!1,stripe:null,show:!1,expandable:!1,reply:!1,open:!1,email:{},image:!1,money:!1,value:0,imageData:"",imageLinks:[],images:[],downloadLinks:[],files:[],showImages:!1,text:"",clicked:[!1,!1,!1],disabled:!0,Errors:{message:""}},a.handleClickOpen=function(){a.setState({open:!0})},a.handlePayment=function(){a.setState({checkout:!0})},a.handlePaymentClose=function(){a.setState({checkout:!1})},a.handleClose=function(){a.setState({open:!1})},a.handleExpandClick=function(){a.setState(function(e){return{expanded:!e.expanded}})},a.isExpandable=function(){if(void 0!==a.props.reply){var e=!1;a.props.reply.props.children[1].length>0&&(e=!0),a.setState({expandable:e,reply:!0})}else a.setState({expandable:!1});console.log("Mail",a.props.mail),a.props.mail&&void 0!==a.props.mail.money&&a.setState({money:a.props.mail.money,value:a.props.mail.value}),a.props.imageLinks&&0!==a.props.imageLinks.length&&a.setState({downloadLinks:a.props.imageLinks},function(){a.displayImages()})},a.valChange=function(e){var t=e.target.value;a.setState({text:t},function(){return a.validateChange()})},a.generateGuid=function(){var e,t;for(e="",t=0;t<32;t++)8!==t&&12!==t&&16!==t&&20!==t||(e+="-"),e+=Math.floor(16*Math.random()).toString(16).toUpperCase();return e},a.imageUpload=function(){var e=Object(p.a)(Object(p.a)(a));if(0!==e.state.files.length){var t="profileData/"+e.props.objectId+"/images",n=new Blob([e.state.files[0]],{type:e.state.files[0].type}),r=e.state.files[0].name.split(".");se.a.Files.saveFile(t,e.generateGuid()+"."+r[1],n,!0).then(function(t){var a=e.state.imageLinks;a.push(t),e.setState({imageLinks:a},function(){var t=e.state.files;t.shift(),e.setState({files:t},function(){e.imageUpload()})})}).catch(function(e){console.log("error - "+e.message)})}else e.sendMail()},a.sendMail=function(){var e,t,n=Object(p.a)(Object(p.a)(a)),r="";"Seller"===a.props.folder?(e="sellingemails.txt",t=a.props.getMessage.sellingEmails):"Buyer"===a.props.folder&&(e="buyingemails.txt",t=a.props.getMessage.buyingEmails),r="Admin"===a.props.getName?"sellingemails.txt"===e?a.props.to:a.props.from:"Admin";var o={from:a.props.getName,to:r,content:a.state.text,imageLinks:a.state.imageLinks,seen:!1};F.a.get(t).then(function(t){for(var a=t.data,r=n.props.id,s=0;s<a.length;s++)if(a[s].id===r){var i=a[s].reply;i.push(o),a[s].reply=i}var l="profileData/"+n.props.objectId+"/",c=new Blob([JSON.stringify(a)],{type:"application/json"});se.a.Files.saveFile(l,e,c,!0).then(function(t){if(n.state.isAdmin){var a="name = '"+n.props.from+"'",s=se.a.DataQueryBuilder.create().setWhereClause(a);se.a.Data.of("Messaging").find(s).then(function(t){var a="";a="sellingemails.txt"===e?t[0].sellingEmails:t[0].buyingEmails,F.a.get(a).then(function(a){var n=a.data;console.log("Other Emailer",a.data);for(var s=0;s<n.length;s++)if(n[s].id===r){var i=n[s].reply;i.push(o),n[s].reply=i}var l="profileData/"+t[0].userID+"/",c=new Blob([JSON.stringify(n)],{type:"application/json"});se.a.Files.saveFile(l,e,c,!0).then(function(e){}).catch(function(e){})}).catch(function(e){console.log("Error",e)})}).catch(function(e){})}else F.a.post("https://api.backendless.com/C499EC1A-F6D2-77C2-FFCF-14A634B64900/9EB16649-E4D8-8EAC-FFF8-6B8CE47C7600/services/MyService/sendAdminMail",{record:e,id:r,email:o,reply:!0},{headers:{"Content-Type":"application/json"}}).then(function(e){console.log("Message Init",e)}).catch(function(e){console.log("Message Error",e)})}).catch(function(e){})}).catch(function(e){console.log("Error",e)}),a.setState({open:!1,image:!1,imageLinks:[],text:"",money:!1,files:[],value:0,clicked:[!1,!1,!1],showImages:!1,Errors:{message:""}},function(){a.handleClose()})},a.validateChange=function(){var e=a.state.Errors;0===a.state.text.length?e.message="cannot be empty":e.message="",a.setState({Errors:e},function(){a.validateErrors()})},a.isAdmin=function(){var e=Object(p.a)(Object(p.a)(a));a.props.objectId&&F.a.post("https://api.backendless.com/C499EC1A-F6D2-77C2-FFCF-14A634B64900/9EB16649-E4D8-8EAC-FFF8-6B8CE47C7600/services/MyService/isAdmin",{id:e.props.objectId},{headers:{"Content-Type":"application/json"}}).then(function(t){e.setState({isAdmin:t.data})}).catch(function(e){console.log("Error",e.message)})},a.validateErrors=function(){var e=a.state.Errors.message.length>0;a.setState({disabled:e})},a.openDialog=function(){a.setState({show:!0,mail:a.props.mail})},a.handleSave=function(e){a.setState({files:e})},a.handleImage=function(){a.setState({image:!a.state.image})},a.dropZone=function(){return a.state.image?"Min DragZone":"Add Image"},a.getSubject=function(){return!(a.props.subject&&a.props.subject.length>0)},a.hasImages=function(){return 0===a.state.downloadLinks.length},a.showImages=function(){a.setState({showImages:!a.state.showImages})},a.displayImages=function(){var e=a.state.downloadLinks.map(function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("img",{onClick:function(){var e=Object(l.a)(a.state.clicked);e[t]=!0,console.log("Thumbnail: ",e),a.setState({clicked:e},function(){a.displayImages()})},className:"thumbnail",src:e.fileURL,alt:"new",width:"50%",height:"50%"}),r.a.createElement(W.a,{open:a.state.clicked[t],onClose:function(){var e=Object(l.a)(a.state.clicked);e[t]=!1,console.log("On Ext: ",e),a.setState({clicked:e},function(){a.displayImages()})},"aria-labelledby":"form-dialog-title"},r.a.createElement("img",{src:e.fileURL,alt:"new",width:"100%",height:"100%"}),r.a.createElement(H.a,null,r.a.createElement(P.a,{onClick:function(){var e=Object(l.a)(a.state.clicked);e[t]=!1,console.log("On Btn: ",e),a.setState({clicked:e},function(){a.displayImages()})},color:"primary"},"Cancel"))))});a.setState({imageData:e})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.isExpandable(),this.isAdmin(),this.setState({stripe:this.props.stripe})}},{key:"getName",value:function(){return this.props.to!==this.props.getName?this.props.to:this.props.from}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(et.a,{className:t.card},r.a.createElement(Bt.a,{title:r.a.createElement("div",null,"From: ",this.props.from,r.a.createElement("br",null)," ",r.a.createElement("div",null,"To: ",this.props.to)),subheader:r.a.createElement("div",{hidden:this.getSubject()},"Subject: ",this.props.subject)}),r.a.createElement(at.a,null,r.a.createElement(at.a,null,this.props.content),r.a.createElement(P.a,{hidden:this.hasImages(),className:"m-2",variant:"contained",color:"secondary",onClick:this.showImages},this.state.showImages?"Hide":"Show"," Images"),r.a.createElement("div",{hidden:!this.state.showImages},this.state.imageData)),r.a.createElement(Rt.a,{className:t.actions,disableActionSpacing:!0},r.a.createElement(ve.a,{className:It()(t.expand,Object(pe.a)({},t.expandOpen,this.state.expanded)),hidden:!this.state.expandable,onClick:this.handleExpandClick,"aria-expanded":this.state.expanded,"aria-label":"Show more"},r.a.createElement(Tt.a,null))),r.a.createElement(Ut.a,{in:this.state.expanded,timeout:"auto",unmountOnExit:!0},r.a.createElement(at.a,null,this.props.reply)),r.a.createElement(P.a,{hidden:!this.state.money,className:"m-2",variant:"contained",color:"secondary",onClick:this.handlePayment},"Payment of: ",this.state.value," CAD"),r.a.createElement(P.a,{hidden:!this.state.reply,className:"m-2",variant:"contained",color:"secondary",onClick:this.handleClickOpen},"Reply"),r.a.createElement(P.a,{hidden:!this.state.isAdmin,className:"m-2",variant:"contained",color:"secondary",onClick:this.openDialog},"Pass Through"),r.a.createElement(qt,{getMessage:this.props.getMessage,mail:this.state.mail,show:this.state.show,folder:this.props.folder,objectId:this.props.objectId,close:function(){e.setState({show:!1,email:{}})}})),r.a.createElement(W.a,{open:this.state.checkout,onClose:this.handlePaymentClose,"aria-labelledby":"form-dialog-title",maxWidth:"md",fullWidth:!0},r.a.createElement(V.a,{id:"form-dialog-title"},"Payment"),r.a.createElement(Qt.StripeProvider,{stripe:this.state.stripe},r.a.createElement(na,{stripe:this.state.stripe,money:this.state.value})),r.a.createElement(H.a,null,r.a.createElement(P.a,{onClick:this.handlePaymentClose,color:"primary"},"Cancel"))),r.a.createElement(W.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"form-dialog-title",maxWidth:"md",fullWidth:!0},r.a.createElement(V.a,{id:"form-dialog-title"},"Email to: ",this.getName()),r.a.createElement("div",{className:"panel panel-default warning"},r.a.createElement(Z,{formErrors:this.state.Errors})),r.a.createElement(Y.a,null,r.a.createElement(P.a,{onClick:this.handleImage,color:"primary"},this.dropZone()),r.a.createElement("div",{hidden:!this.state.image},r.a.createElement(Ht.a,{onChange:this.handleSave,acceptedFiles:["image/jpeg","image/png","image/bmp"],filesLimit:3,maxFileSize:5e6})),r.a.createElement(G.a,{margin:"dense",id:"text",label:"Details",type:"text",onChange:this.valChange,required:!0,multiline:!0,inputProps:{maxLength:400},fullWidth:!0}),this.state.text.length,"/400"),r.a.createElement(H.a,null,r.a.createElement(P.a,{onClick:this.handleClose,color:"primary"},"Cancel"),r.a.createElement(P.a,{disabled:this.state.disabled,onClick:this.imageUpload,color:"primary"},"Send"))),r.a.createElement("br",null))}}]),t}(r.a.Component),oa=Object(M.withStyles)(function(e){return{root:{width:"100%",maxWidth:800},card:{maxWidth:700},media:{height:0,paddingTop:"56.25%"},actions:{display:"flex"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:Lt.a[500]}}})(ra),sa=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={content:"",drawn:!1},a.drawEmail=function(){var e="",t="",n=a.props.getMessage,o=Object(p.a)(Object(p.a)(a)),s="";"Seller"===a.props.folder?s=n.sellingEmails:"Buyer"===a.props.folder&&(s=n.buyingEmails),F.a.get(s).then(function(a){void 0!==(e=a.data)&&(t=e.map(function(e,t){var a="";void 0!==e.reply&&(a=e.reply.map(function(t,a){return r.a.createElement("div",{key:a,className:"content"},r.a.createElement(oa,{key:a,from:t.from,to:t.to,imageLinks:t.imageLinks,subject:e.subject,stripe:o.props.stripe,content:t.content}))}));var n=e;return r.a.createElement("center",{key:t,className:"content"},r.a.createElement(oa,{key:t,folder:o.props.folder,getName:o.props.getUser.name,objectId:o.props.getUser.objectId,getMessage:o.props.getMessage,mail:n,id:n.id,from:n.from,to:n.to,subject:n.subject,content:n.content,stripe:o.props.stripe,reply:r.a.createElement("div",null,r.a.createElement("br",null),a)}),r.a.createElement("br",null),r.a.createElement("br",null))}),o.setState({content:t,drawn:!0}))}).catch(function(e){})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.classes;return this.state.drawn||this.drawEmail(),r.a.createElement("center",{className:"content"},r.a.createElement("center",{className:e.root},r.a.createElement(Q.a,{component:"h3",variant:"display4",gutterBottom:!0},this.props.folder)),this.state.content)}}]),t}(r.a.Component),ia=Object(M.withStyles)({root:{width:"100%",maxWidth:500}})(sa),la=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={showActive:!0},a.handleClick=function(){a.setState({showActive:!a.state.showActive})},a.getButton=function(){return a.state.showActive?"SwitchTo: Buyer Inbox":"SwitchTo: Seller Inbox"},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"main"},r.a.createElement("center",null,r.a.createElement(Ue.a,{to:this.state.showActive?"/mailBox/buyerInbox":"/mailBox/sellerInbox"},r.a.createElement(P.a,{onClick:function(){e.handleClick()},color:"primary"},this.getButton()))),r.a.createElement(b.a,{path:"/mailBox/buyerInbox",render:function(t){return r.a.createElement(ia,Object.assign({},t,{stripe:e.props.stripe,getUser:e.props.getUser,getMessage:e.props.getMessage(),folder:"Buyer"}))}}),r.a.createElement(b.a,{path:"/mailBox/sellerInbox",render:function(t){return r.a.createElement(ia,Object.assign({},t,{stripe:e.props.stripe,getUser:e.props.getUser,getMessage:e.props.getMessage(),folder:"Seller"}))}}))}}]),t}(n.Component),ca="https://api.backendless.com/C499EC1A-F6D2-77C2-FFCF-14A634B64900/"+x[0]+"/",ua=x[1];se.a.initApp("C499EC1A-F6D2-77C2-FFCF-14A634B64900",ua);var da=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={ip:"0.0.0.0",loggedin:!1,userData:{},messageData:{},snackbar:!1,stripe:null,show:{homePage:!0,mailbox:!1,sellerPage:!1,buyerPage:!1,accountPage:!1},currentLocation:{lat:0,lng:0},storeData:[]},a.getLocation=function(){var e=Object(p.a)(Object(p.a)(a));F.a.get("https://ipinfo.io?token=ce9d47e2eb3f65").then(function(t){var a=t.data.loc.split(","),n=e.state.currentLocation;n.lat=parseFloat(a[0]),n.lng=parseFloat(a[1]),e.setState({currentLocation:n,ip:t.data.ip})}).catch(function(e){console.log("Error",e)})},a.handleClick=function(){a.setState({snackbar:!0})},a.handleClose=function(e,t){"clickaway"!==t&&a.setState({snackbar:!1})},a.initUserData=function(e){var t=Object(p.a)(Object(p.a)(a)),n=a.props.cookies;console.log("User Token: "+e["user-token"]),n.set("AuthToken",e["user-token"],{path:"/"}),console.log("Cookie Created "),a.setState({loggedin:!0,userData:e},function(){navigator&&navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){var n=t.state.currentLocation;n.lat=e.coords.latitude,n.lng=e.coords.longitude,t.setState({currentLocation:n},console.log("Position",n," State ",a.state.currentLocation))})})},a.userLogOut=function(){a.props.cookies.remove("AuthToken",{path:"/"}),window.location.reload()},a.initMessageData=function(e){a.setState({messageData:e})},a.storeInit=function(e){a.setState({storeData:e}),console.log("STOREDATA: ",e)},a.getAuthToken=function(){return a.state.userData["user-token"]},a.getUserData=function(){return a.state.userData},a.getMessageData=function(){return a.state.messageData},a.handleStoreDelete=function(e){var t=a.state.storeData.filter(function(t){return t.ID!==e});a.setState({storeData:t},function(){var t="StoreID = '"+e+"'",n=se.a.DataQueryBuilder.create().setWhereClause(t),r=Object(p.a)(Object(p.a)(a));se.a.Data.of("Stores").find(n).then(function(e){var t=[];if(0===(t=(t=JSON.parse(e[0].UserList)).filter(function(e){return e!==r.state.userData.objectId})).length)se.a.Data.of("Stores").remove({objectId:e[0].objectId}).then(function(e){}).catch(function(e){});else{var a=e[0];a.UserList=JSON.stringify(t),se.a.Data.of("Stores").save(a).then(function(e){console.log("Store instance has been updated",e)}).catch(function(e){console.log("an error has occurred "+e.message)})}var n="profileData/"+r.getUserData().objectId+"/",o=new Blob([JSON.stringify(r.state.storeData)],{type:"application/json"});console.log("DELETE",o),se.a.Files.saveFile(n,"profileData.txt",o,!0).then(function(e){}).catch(function(e){})}).catch(function(e){})})},a.handleStoreCreate=function(e,t){var n=t,r=a.state.storeData,o={ID:n.place_id,address:n.vicinity,buyer:"",dealProgression:0,imageResource:0,isNew:!1,name:n.name,seller:a.getUserData().name,storeDeals:[{}]};r.push(o),console.log("STOREDATA",r),a.setState({storeData:r},function(){var t="StoreID = '"+e.ID+"'",n=se.a.DataQueryBuilder.create().setWhereClause(t),r=Object(p.a)(Object(p.a)(a));se.a.Data.of("Stores").find(n).then(function(t){var a=[];if(0===t.length){a=[r.getUserData().objectId];var n=e;n.UserList=JSON.stringify(a),se.a.Data.of("Stores").save(n).then(function(e){console.log("Store instance has been created",e)}).catch(function(e){console.log("an error has occurred "+e.message)})}else if((a=JSON.parse(t[0].UserList)).includes(r.getUserData().objectId))r.setState({snackbar:!0});else{a.push(r.getUserData().objectId);var o=t[0];o.UserList=JSON.stringify(a),se.a.Data.of("Stores").save(o).then(function(e){console.log("Store instance has been updated",e)}).catch(function(e){console.log("an error has occurred "+e.message)})}var s="profileData/"+r.getUserData().objectId+"/",i=new Blob([JSON.stringify(r.state.storeData)],{type:"application/json"});console.log("ADD",JSON.stringify(r.state.storeData)),se.a.Files.saveFile(s,"profileData.txt",i,!0).then(function(e){}).catch(function(e){})}).catch(function(e){console.log("Store Add Error",e)})})},a.handleDealDelete=function(e,t){var n=e.storeDeals.filter(function(e){return e!==t}),r=e;r.storeDeals=n,console.log("NEW LIST",r);var o=Object(l.a)(a.state.storeData),s=o.indexOf(e);o[s]=Object(i.a)({},e),o[s]=r,a.setState({storeData:o});var c=Object(p.a)(Object(p.a)(a)),u="profileData/"+c.getUserData().objectId+"/",d=new Blob([JSON.stringify(c.state.storeData)],{type:"application/json"});console.log("DELETE",d),se.a.Files.saveFile(u,"profileData.txt",d,!0).then(function(e){}).catch(function(e){})},a.handleDealEdit=function(e,t,n){var r=e.storeDeals.indexOf(t),o=e;o.storeDeals[r]=n,console.log("NEW LIST",o);var s=Object(l.a)(a.state.storeData),c=s.indexOf(e);s[c]=Object(i.a)({},e),s[c]=o,a.setState({storeData:s});var u=Object(p.a)(Object(p.a)(a)),d="profileData/"+u.getUserData().objectId+"/",m=new Blob([JSON.stringify(u.state.storeData)],{type:"application/json"});console.log("UPDATE",m),se.a.Files.saveFile(d,"profileData.txt",m,!0).then(function(e){}).catch(function(e){})},a.handleDealAdd=function(e,t){var n=e;n.storeDeals.push(t);var r=Object(l.a)(a.state.storeData),o=r.indexOf(e);r[o]=Object(i.a)({},e),r[o]=n,a.setState({storeData:r});var s=Object(p.a)(Object(p.a)(a)),c="profileData/"+s.getUserData().objectId+"/",u=new Blob([JSON.stringify(s.state.storeData)],{type:"application/json"});se.a.Files.saveFile(c,"profileData.txt",u,!0).then(function(e){}).catch(function(e){})},a.isLogged=function(){var e=a.props.cookies.get("AuthToken");void 0!==e&&F.a.get(ca+"users/isvalidusertoken/"+e).then(function(e){return console.log("Result",e),e.data}).catch(function(e){console.log("error "+e)})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.getLocation();var t=document.createElement("script");t.id="stripe-js",t.src="https://js.stripe.com/v3/",t.async=!1,document.body.appendChild(t),window.Stripe?this.setState({stripe:window.Stripe(x[3])}):document.querySelector("#stripe-js").addEventListener("load",function(){e.setState({stripe:window.Stripe(x[3])})})}},{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(E.a,null,r.a.createElement("div",null,r.a.createElement(f.a,null,"This website uses cookies to enhance the user experience."),r.a.createElement(_e,{onInit:this.initUserData,onLogOut:this.userLogOut,onMessageInit:this.initMessageData,onStoreInit:this.storeInit,getAuth:this.getAuthToken,getUser:this.getUserData,ip:this.state.ip}),r.a.createElement(b.a,{exact:!0,path:"/",render:function(t){return r.a.createElement(he,Object.assign({},t,{getUser:e.state.userData,getCoords:e.state.currentLocation,getLogged:e.state.loggedin,getMessage:e.state.messageData}))}}),r.a.createElement(b.a,{path:"/sellerProfile",render:function(t){return r.a.createElement(wt,Object.assign({},t,{getUser:e.getUserData,onDelete:e.handleStoreDelete,onDealDelete:e.handleDealDelete,onDealEdit:e.handleDealEdit,onDealCreate:e.handleDealAdd,onCreate:e.handleStoreCreate,storeData:e.state.storeData}))}}),r.a.createElement(b.a,{path:"/mailBox",render:function(t){return r.a.createElement(la,Object.assign({},t,{stripe:e.state.stripe,getUser:e.state.userData,getMessage:e.getMessageData}))}}),r.a.createElement("div",null,r.a.createElement(bt.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.snackbar,autoHideDuration:6e3,onClose:this.handleClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},"You are Already Registered to this store"),action:[r.a.createElement(ve.a,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:this.handleClose},r.a.createElement(ze.a,null))]}))))}}]),t}(n.Component),ma=Object(M.withStyles)(function(e){return{button:{margin:e.spacing.unit},close:{padding:e.spacing.unit/2},input:{display:"none"}}})(Object(A.b)(da));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(516);s.a.render(r.a.createElement(A.a,null,r.a.createElement(ma,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[280,1,2]]]);
//# sourceMappingURL=main.a3552799.chunk.js.map